<mjml>
  <mj-head>
    <mj-title>{{ meta.headline | e }}</mj-title>
    <mj-preview>{{ meta.headline | e }}</mj-preview>
    <mj-attributes>
      <mj-all font-family="'Helvetica Neue', Helvetica, Arial, sans-serif"></mj-all>
      <mj-text font-size="16px" color="#333333" line-height="24px" padding="0px"></mj-text>
      <mj-section padding="0px"></mj-section>
    </mj-attributes>
    <mj-style inline="inline">
      .link-nostyle { color: inherit; text-decoration: none }
      .link-blue { color: #3498db; text-decoration: none; font-weight: bold; }

      /* Badge æ ·å¼ */
      .badge { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; text-transform: uppercase; color: #ffffff; background-color: #7f8c8d; vertical-align: middle; }
      .badge-macro { background-color: #2c3e50; }
      .badge-tech { background-color: #8e44ad; }

      /* æ·±åº¦åˆ†ææ¡† */
      .insight-box { background-color: #f8f9fa; border-left: 4px solid #3498db; padding: 12px; margin-top: 8px; color: #555; font-size: 14px; }
      .insight-box-tech { border-left-color: #8e44ad; }
    </mj-style>
  </mj-head>
  <mj-body background-color="#f4f4f4">

    <mj-section background-color="#1a202c" padding="30px 20px">
      <mj-column>
        <mj-text align="center" color="#ffffff" font-size="12px" letter-spacing="2px" text-transform="uppercase">Daily Briefing</mj-text>
        <mj-text align="center" color="#ffffff" font-size="26px" font-weight="bold" padding-top="8px">{{ meta.headline | e }}</mj-text>
        <mj-text align="center" padding-top="12px">
          {% for tag in meta.tags %}
            <span style="display:inline-block; border:1px solid #4a5568; color:#cbd5e0; padding:3px 6px; border-radius:10px; font-size:11px; margin:0 2px;">#{{ tag | e }}</span>
          {% endfor %}
        </mj-text>
      </mj-column>
    </mj-section>

    <mj-section padding="15px 20px 5px 20px">
      <mj-column>
        <mj-text font-size="18px" font-weight="bold" color="#2c3e50" border-bottom="2px solid #2c3e50" padding-bottom="8px">
          ğŸŒ Part A: å…¨çƒå®è§‚ (Global Macro)
        </mj-text>
      </mj-column>
    </mj-section>

    {% for item in global_macro %}
    <mj-section padding="6px 20px">
      <mj-column background-color="#ffffff" border-radius="6px" padding="15px" css-class="shadow">
        <mj-text padding-bottom="8px">
            <span class="badge badge-macro">{{ item.category | e }}</span>
            <span style="float:right; color:#95a5a6; font-size:13px; font-weight:500;">{{ item.type | e }}</span>
        </mj-text>
        <mj-text font-size="18px" font-weight="bold" padding-bottom="8px" line-height="1.3">
            <a href="{{ item.source.url | e }}" class="link-nostyle">{{ item.title | e }}</a>
        </mj-text>
        <mj-text font-size="15px" color="#34495e" padding-bottom="5px">
            <strong>æ ¸å¿ƒäº‹å®ï¼š</strong>{{ item.core_fact | e }}
        </mj-text>
        <mj-text>
            <div class="insight-box"><strong>ğŸ¦‹ æ·±åº¦æ¨æ¼”ï¼š</strong><br/>{{ item.depth_analysis | e }}</div>
        </mj-text>
        <mj-text align="right" font-size="12px" padding-top="8px">
            <a href="{{ item.source.url | e }}" class="link-blue">Read Source ({{ item.source.name | e }}) &rarr;</a>
        </mj-text>
      </mj-column>
    </mj-section>
    {% endfor %}


    <mj-section padding="20px 20px 5px 20px">
      <mj-column>
        <mj-text font-size="18px" font-weight="bold" color="#8e44ad" border-bottom="2px solid #8e44ad" padding-bottom="8px">
          ğŸš€ Part B: ç¡¬æ ¸ç§‘æŠ€ (Tech Front)
        </mj-text>
      </mj-column>
    </mj-section>

    {% for item in tech_front %}
    <mj-section padding="6px 20px">
      <mj-column background-color="#ffffff" border-radius="6px" padding="15px">
        <mj-text padding-bottom="8px">
            <span class="badge badge-tech">{{ item.category | e }}</span>
            <span style="float:right; color:#95a5a6; font-size:13px; font-weight:500;">{{ item.type | e }}</span>
        </mj-text>
        <mj-text font-size="18px" font-weight="bold" padding-bottom="8px" line-height="1.3">
            <a href="{{ item.source.url | e }}" class="link-nostyle">{{ item.title | e }}</a>
        </mj-text>
        <mj-text font-size="15px" color="#34495e" padding-bottom="5px">
            <strong>âš¡ æŠ€æœ¯/äº‰è®®ç„¦ç‚¹ï¼š</strong>{{ item.core_fact | e }}
        </mj-text>
        <mj-text>
            <div class="insight-box insight-box-tech"><strong>ğŸ§  æ¶æ„å¸ˆè§†ç‚¹ï¼š</strong><br/>{{ item.depth_analysis | e }}</div>
        </mj-text>
        <mj-text align="right" font-size="12px" padding-top="8px">
            <a href="{{ item.source.url | e }}" style="color:#8e44ad; text-decoration:none; font-weight:bold;">Source: {{ item.source.name | e }} &rarr;</a>
        </mj-text>
      </mj-column>
    </mj-section>
    {% endfor %}

    <mj-section padding="0px 0px 20px 0px">
      <mj-column>
        <mj-text align="center" color="#999999" font-size="11px">Generated by Grok</mj-text>
      </mj-column>
    </mj-section>

  </mj-body>
</mjml>